{% load hq_shared_tags %}
{% load i18n %}

<div id="ko-tabs-pull-content" class="ko-template">
  <div data-bind="if: master_link">
    <p>{% trans "This project is linked to " %}<a data-bind="attr: {'href': master_href}, text: master_link.master_domain"></a></p>
    <div>
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th class="col-sm-5">{% trans "Linked Model" %}</th>
          <th class="col-sm-2">{% trans "Last Updated" %} ({{ timezone }})</th>
          <th class="col-sm-5"></th>
        </tr>
        </thead>
        <tbody data-bind="foreach: model_status">
        <tr>
          <td data-bind="text: name"></td>
          <td data-bind="text: lastUpdate"></td>
          <td data-bind="css: {'has-error': error}">
            <button class="btn btn-danger" data-bind="visible: showUpdate() && !update_url, click: update">
              {% trans "Overwrite" %}
            </button>
            <button class="btn btn-default disabled" data-bind="visible: showSpinner">
              <i class="fa fa-spinner"></i>
            </button>
            <button class="btn btn-success disabled" data-bind="visible: hasSuccess">
              <i class="fa fa-check"></i> {% trans "Success" %}
            </button>
            <button class="btn btn-danger disabled" data-bind="visible: error">
              <i class="fa fa-times"></i> {% trans "Error" %}
            </button>
            <span class="help-block" data-bind="visible: error, text: error"></span>
            <a data-bind="visible: showUpdate && update_url, attr: {href: update_url}">{% trans "Go to update page" %}</a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
